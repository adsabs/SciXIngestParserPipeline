{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Document",
  "description": "Data schema for importing metadata into ADS pipeline",
  "type": "object",
  "properties": {
    "recordData": {
      "title": "RecordData",
      "description": "Data schema for importing metadata into ADS pipeline",
      "type": "object",
      "properties": {
        "createdTime": {
          "description": "Timestamp for when the metadata was harvested (e.g. file created timestamp)",
          "type": "string"
        },
        "parsedTime": {
          "description": "Timestamp for when parsing commenced.",
          "type": "string"
        },
        "loadType": {
          "description": "ENUM: do we get this from a file or from a URL (or other?)",
          "$comment": "This list may need to be expanded.",
          "type": "string",
          "enum": [
            "fromFile",
            "fromURL"
          ]
        },
        "loadFormat": {
          "description": "ENUM:",
          "$comment": "This list may need to be expanded.",
          "type": "string",
          "enum": [
            "JATS",
            "OtherXML",
            "HTML",
            "Text"
          ]
        },
        "loadLocation": {
          "description": "If loadtype is fromFile, path to file; if fromURL, it's a URL",
          "type": "string"
        },
        "recordOrigin": {
          "description": "Provider of record (e.g. Publisher, STI, arXiv)",
          "type": "string"
        }
      },
      "required": [
        "createdTime",
        "parsedTime",
        "loadType",
        "loadFormat",
        "loadLocation",
        "recordOrigin"
      ],
      "additionalProperties": false
    },
    "relatedTo": {
      "type": "array",
      "description": "Array of RelatedTo.json objects",
      "items": {
        "title": "RelatedTo",
        "description": "Holds information about whether this Document is related to another (e.g. erratum)",
        "type": "object",
        "properties": {
          "relationship": {
            "type": "string",
            "enum": [
              "addenda",
              "ascl",
              "catalog",
              "collection",
              "commentary",
              "editions",
              "errata",
              "press",
              "proposal",
              "related",
              "report",
              "reprint",
              "retraction",
              "series",
              "supplement",
              "translation",
              "updated"
            ]
          },
          "relatedDocID": {
            "description": "raw string from publisher (e.g. doi)",
            "type": "string"
          }
        }
      }
    },
    "editorialHistory": {
      "title": "EdHist",
      "description": "Holds editorial history; papers can have multiple received/revised dates.",
      "type": "object",
      "properties": {
        "receivedDates": {
          "description": "papers can have more than one receivedDate",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "revisedDates": {
          "description": "papers can have more than one revisedDate",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "acceptedDate": {
          "type": "string"
        }
      }
    },
    "pubDate": {
      "title": "PubDates",
      "description": "Holds editorial history; papers can have multiple received/revised dates.",
      "type": "object",
      "properties": {
        "electrDate": {
          "type": "string"
        },
        "printDate": {
          "type": "string"
        },
        "otherDate": {
          "type": "array",
          "description": "Array of date-like objects (e.g. 'submitted', 'revised', 'accepted')",
          "items": {
            "type": "object",
            "properties": {
              "otherDateType": {
                "type": "string"
              },
              "otherDateValue": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "publication": {
      "title": "Publication",
      "type": "object",
      "$comments": "Contains what would go into the %J field in Classic",
      "properties": {
        "docType": {
          "type": "string",
          "enum": [
            "article",
            "thesis",
            "software",
            "book",
            "inbook",
            "proceedings",
            "inproceedings",
            "catalog",
            "data",
            "report",
            "proposal",
            "miscellaneous"
          ]
        },
        "pubName": {
          "type": "string"
        },
        "confName": {
          "type": "string"
        },
        "confLocation": {
          "type": "string"
        },
        "confDates": {
          "type": "string"
        },
        "confEditors": {
          "type": "array",
          "items": {
            "title": "Contrib",
            "description": "Describes a person in any role (author, editor, conf/OC member, etc)",
            "type": "object",
            "properties": {
              "name": {
                "type": "object",
                "properties": {
                  "surname": {
                    "type": "string"
                  },
                  "given_name": {
                    "type": "string"
                  },
                  "middle_name": {
                    "type": "string"
                  },
                  "prefix": {
                    "type": "string"
                  },
                  "suffix": {
                    "type": "string"
                  },
                  "pubraw": {
                    "type": "string"
                  },
                  "native_lang": {
                    "type": "string"
                  },
                  "collab": {
                    "type": "string"
                  }
                }
              },
              "affiliation": {
                "type": "array",
                "items": {
                  "title": "Affil",
                  "description": "Object to hold a single affiliation.  Each Contrib object will have an array of these.",
                  "type": "object",
                  "properties": {
                    "affPubRaw": {
                      "description": "Affil string from publisher.",
                      "type": "string"
                    },
                    "affPubID": {
                      "description": "Affil ID",
                      "type": "string"
                    },
                    "affPubIDType": {
                      "description": "Affil ID system (ror, grid, ads etc...)",
                      "type": "string"
                    }
                  }
                }
              },
              "attrib": {
                "type": "object",
                "properties": {
                  "collab": {
                    "type": "boolean"
                  },
                  "deceased": {
                    "type": "boolean"
                  },
                  "coauthor": {
                    "type": "boolean"
                  },
                  "email": {
                    "type": "string"
                  },
                  "funding": {
                    "type": "string"
                  },
                  "orcid": {
                    "type": "string",
                    "pattern": "^\\d{4}-\\d{4}-\\d{4}-\\d{3}[0-9X]$"
                  }
                }
              }
            }
          }
        },
        "confPID": {
          "type": "string"
        },
        "publisher": {
          "type": "string"
        },
        "issueNum": {
          "type": "string"
        },
        "volumeNum": {
          "type": "string"
        },
        "pubYear": {
          "type": "string"
        },
        "bookSeries": {
          "type": "object",
          "properties": {
            "seriesName": {
              "type": "string"
            },
            "seriesID": {
              "type": "string"
            },
            "seriesDescription": {
              "type": "string"
            }
          }
        },
        "ISSN": {
          "type": "array",
          "items": {
            "title": "IssnType",
            "description": "Holds an individual ISSN, with its type (e.g. epub, ppub)",
            "type": "object",
            "properties": {
              "pubtype": {
                "type": "string"
              },
              "issnString": {
                "type": "string"
              }
            }
          }
        },
        "isRefereed": {
          "type": "boolean"
        }
      }
    },
    "persistentIDs": {
      "type": "array",
      "description": "Array of PersistentID.json objects",
      "items": {
        "title": "PersistentID",
        "description": "Holds one or more persistent identifiers",
        "type": "object",
        "properties": {
          "Crossref": {
            "type": "string"
          },
          "ISBN": {
            "type": "array",
            "items": {
              "title": "IsbnType",
              "description": "Holds an individual ISBN, with its type (e.g. epub, ppub)",
              "type": "object",
              "properties": {
                "pubtype": {
                  "type": "string"
                },
                "issnString": {
                  "type": "string"
                }
              }
            }
          },
          "DOI": {
            "$comment": "Borrowed from arxiv spec https://github.com/arXiv/arxiv-canonical/blob/develop/schema-extended/arxiv-extended.json",
            "type": "string",
            "pattern": "^10\\.\\d+(\\.\\d+)?/\\S+$",
            "minLength": 1
          },
          "preprint": {
            "type": "object",
            "properties": {
              "source": {
                "type": "string"
              },
              "identifier": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "publisherIDs": {
      "type": "array",
      "description": "Array of PublisherID.json objects",
      "items": {
        "title": "PublisherID",
        "description": "Holds one publisher identifier, e.g. 'manuscript number'",
        "type": "object",
        "properties": {
          "attribute": {
            "type": "string"
          },
          "Identifier": {
            "type": "string"
          }
        }
      }
    },
    "pagination": {
      "title": "Pagination",
      "description": "Data schema for importing metadata into ADS pipeline",
      "type": "object",
      "properties": {
        "firstPage": {
          "type": "string"
        },
        "lastPage": {
          "type": "string"
        },
        "pageCount": {
          "type": "string"
        },
        "pageRange": {
          "type": "string"
        },
        "electronicID": {
          "type": "string"
        }
      }
    },
    "authors": {
      "type": "array",
      "description": "Array of Contrib objects",
      "items": {
        "title": "Contrib",
        "description": "Describes a person in any role (author, editor, conf/OC member, etc)",
        "type": "object",
        "properties": {
          "name": {
            "type": "object",
            "properties": {
              "surname": {
                "type": "string"
              },
              "given_name": {
                "type": "string"
              },
              "middle_name": {
                "type": "string"
              },
              "prefix": {
                "type": "string"
              },
              "suffix": {
                "type": "string"
              },
              "pubraw": {
                "type": "string"
              },
              "native_lang": {
                "type": "string"
              },
              "collab": {
                "type": "string"
              }
            }
          },
          "affiliation": {
            "type": "array",
            "items": {
              "title": "Affil",
              "description": "Object to hold a single affiliation.  Each Contrib object will have an array of these.",
              "type": "object",
              "properties": {
                "affPubRaw": {
                  "description": "Affil string from publisher.",
                  "type": "string"
                },
                "affPubID": {
                  "description": "Affil ID",
                  "type": "string"
                },
                "affPubIDType": {
                  "description": "Affil ID system (ror, grid, ads etc...)",
                  "type": "string"
                }
              }
            }
          },
          "attrib": {
            "type": "object",
            "properties": {
              "collab": {
                "type": "boolean"
              },
              "deceased": {
                "type": "boolean"
              },
              "coauthor": {
                "type": "boolean"
              },
              "email": {
                "type": "string"
              },
              "funding": {
                "type": "string"
              },
              "orcid": {
                "type": "string",
                "pattern": "^\\d{4}-\\d{4}-\\d{4}-\\d{3}[0-9X]$"
              }
            }
          }
        }
      }
    },
    "otherContributor": {
      "type": "array",
      "description": "Array of Contrib/role pairs",
      "items": {
        "title": "OtherContrib",
        "description": "Describes a person and provides a field for their role (e.g. advisor, conference org. cmte, etc)",
        "type": "object",
        "properties": {
          "contrib": {
            "title": "Contrib",
            "description": "Describes a person in any role (author, editor, conf/OC member, etc)",
            "type": "object",
            "properties": {
              "name": {
                "type": "object",
                "properties": {
                  "surname": {
                    "type": "string"
                  },
                  "given_name": {
                    "type": "string"
                  },
                  "middle_name": {
                    "type": "string"
                  },
                  "prefix": {
                    "type": "string"
                  },
                  "suffix": {
                    "type": "string"
                  },
                  "pubraw": {
                    "type": "string"
                  },
                  "native_lang": {
                    "type": "string"
                  },
                  "collab": {
                    "type": "string"
                  }
                }
              },
              "affiliation": {
                "type": "array",
                "items": {
                  "title": "Affil",
                  "description": "Object to hold a single affiliation.  Each Contrib object will have an array of these.",
                  "type": "object",
                  "properties": {
                    "affPubRaw": {
                      "description": "Affil string from publisher.",
                      "type": "string"
                    },
                    "affPubID": {
                      "description": "Affil ID",
                      "type": "string"
                    },
                    "affPubIDType": {
                      "description": "Affil ID system (ror, grid, ads etc...)",
                      "type": "string"
                    }
                  }
                }
              },
              "attrib": {
                "type": "object",
                "properties": {
                  "collab": {
                    "type": "boolean"
                  },
                  "deceased": {
                    "type": "boolean"
                  },
                  "coauthor": {
                    "type": "boolean"
                  },
                  "email": {
                    "type": "string"
                  },
                  "funding": {
                    "type": "string"
                  },
                  "orcid": {
                    "type": "string",
                    "pattern": "^\\d{4}-\\d{4}-\\d{4}-\\d{3}[0-9X]$"
                  }
                }
              }
            }
          },
          "role": {
            "type": "string"
          }
        }
      }
    },
    "title": {
      "type": "object",
      "properties": {
        "textEnglish": {
          "type": "string"
        },
        "textNative": {
          "type": "string"
        },
        "langNative": {
          "type": "string"
        }
      }
    },
    "subtitle": {
      "type": "string"
    },
    "abstract": {
      "type": "object",
      "properties": {
        "textEnglish": {
          "type": "string"
        },
        "textNative": {
          "type": "string"
        },
        "langNative": {
          "type": "string"
        }
      }
    },
    "comments": {
      "type": "array",
      "description": "Comments from authors, etc.",
      "items": {
        "title": "Comment",
        "description": "Stores one comment along with information about its origin",
        "type": "object",
        "properties": {
          "commentOrigin": {
            "type": "string"
          },
          "commentText": {
            "type": "string"
          }
        }
      }
    },
    "fulltext": {
      "type": "object",
      "description": "Contains the body of the fulltext document, and its language",
      "$comment": "Body is free format and could (for example) contain the entire file",
      "properties": {
        "language": {
          "type": "string"
        },
        "body": {
          "type": "string"
        }
      }
    },
    "acknowledgements": {
      "type": "string",
      "description": "Acknowledgements, if fielded separately from body"
    },
    "references": {
      "type": "array",
      "description": "List of references in free text format",
      "items": {
        "type": "string"
      }
    },
    "backmatter": {
      "type": "array",
      "description": "Appendices, Supplementary material.",
      "items": {
        "type": "object",
        "properties": {
          "backType": {
            "type": "string"
          },
          "language": {
            "type": "string"
          },
          "body": {
            "type": "string"
          }
        }
      }
    },
    "astronomicalObjects": {
      "type": "array",
      "description": "List of astronomical objects in free text format",
      "items": {
        "type": "string"
      }
    },
    "esources": {
      "type": "array",
      "description": "Array of ESource.json objects",
      "items": {
        "title": "ESource",
        "description": "Stores the location of any fulltext document not provided with the metadata (e.g. dois)",
        "type": "object",
        "properties": {
          "source": {
            "type": "string",
            "enum": [
              "pub_html",
              "pub_pdf",
              "eprint_pdf",
              "eprint_html",
              "author_pdf",
              "author_html"
            ]
          },
          "location": {
            "$comment": "URL, URI, DOI, etc",
            "type": "string"
          }
        }
      }
    },
    "dataLinks": {
      "type": "array",
      "description": "Array of DataLink.json objects",
      "items": {
        "title": "DataLink",
        "description": "Holds a single data link and its related information",
        "type": "object",
        "properties": {
          "title": {
            "type": "string"
          },
          "identifier": {
            "type": "string"
          },
          "location": {
            "type": "string"
          },
          "dataType": {
            "type": "string"
          },
          "comment": {
            "type": "string"
          }
        }
      }
    },
    "doctype": {
      "type": "string",
      "description": "This will only be required if we set doctype at parsing",
      "enum": [
        "article",
        "eprint",
        "phdthesis",
        "mastersthesis",
        "book",
        "inbook",
        "proceedings",
        "inproceedings",
        "software",
        "talk",
        "abstract",
        "proposal",
        "pressrelease",
        "circular",
        "newsletter",
        "catalog",
        "misc",
        "techreport",
        "nonarticle",
        "dataset"
      ]
    },
    "keywords": {
      "type": "array",
      "description": "Array of Keyword.json objects",
      "items": {
        "title": "Keyword",
        "description": "Holds an individual text keyword, along with its type (e.g. AAS), and/or a numeric keyword if provided (e.g. PACS)",
        "type": "object",
        "properties": {
          "keyString": {
            "type": "string"
          },
          "keySystem": {
            "type": "string"
          },
          "keyIdent": {
            "type": "object",
            "properties": {
              "system": {
                "type": "string"
              },
              "keyID": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "copyright": {
      "type": "object",
      "properties": {
        "status": {
          "type": "boolean"
        },
        "statement": {
          "type": "string"
        }
      }
    },
    "openAccess": {
      "title": "OpenAccess",
      "description": "Publisher-provided OA data",
      "type": "object",
      "$comment": "Some of these may get removed if they're not received with each metadata file/object (e.g. embargo)",
      "properties": {
        "open": {
          "type": "boolean"
        },
        "license": {
          "type": "string"
        },
        "licenseURL": {
          "type": "string"
        },
        "preprint": {
          "type": "string"
        },
        "startDate": {
          "type": "string"
        },
        "endDate": {
          "type": "string"
        },
        "embargoLength": {
          "type": "string"
        }
      }
    },
    "pubnote": {
      "type": "string"
    },
    "funding": {
      "type": "string"
    },
    "version": {
      "type": "string"
    }
  },
  "required": [
    "recordData",
    "title",
    "pubDate",
    "publication"
  ],
  "additionalProperties": false
}
